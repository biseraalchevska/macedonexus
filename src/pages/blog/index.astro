---
import BaseLayout from "../../layouts/BaseLayout.astro";
import SmallHero from "../../components/SmallHero.astro";
import FeaturedPost from "../../components/FeaturedPost.astro";
import BlogCard from "../../components/BlogCard.astro";
import { getCollection } from "astro:content";

const posts = await getCollection("blog");

posts.sort((a: any, b: any) => b.slug.localeCompare(a.slug));

const featured = posts[0];
const others = posts.slice(1);
---

<BaseLayout title="Blog" pageClass="journal-page">
  <SmallHero image="/split.jpg" />

  <section class="journal-intro">
    <div class="journal-inner">
      <h1>Macedonexus Letters</h1>

      <p>
        Reflective writings exploring heritage,
        movement, identity, and cultural continuity.
      </p>
    </div>
  </section>


  {featured && (
    <section class="journal-featured">
      <FeaturedPost
        image={featured.data.image}
        title={featured.data.title}
        excerpt="Read the full reflection."
        slug={featured.slug}
      />
    </section>
  )}


  {others.length > 0 && (
    <section class="journal-list">
      <div class="journal-inner">

        <h2 class="journal-section-title">
          Latest Writings
        </h2>

        <div class="journal-grid">
          {others.map((post: any) => (
            <BlogCard
              image={post.data.image}
              title={post.data.title}
              excerpt={post.data.excerpt ?? "Read more"}
              slug={post.slug}
            />
          ))}
        </div>

      </div>
    </section>
  )}

</BaseLayout>
